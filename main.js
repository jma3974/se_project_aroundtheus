!function(){"use strict";document.querySelector("#card-template");const e=document.querySelector("#profile-add-form"),t=document.querySelector("#profile-edit-form"),s=document.querySelector("#avatar-update-form"),r=(document.querySelector(".profile"),document.querySelector(".profile__button-edit")),i=document.querySelector(".profile__image-edit"),n=document.querySelector(".modal__input-profession"),o=document.querySelector(".modal__input-name"),a=document.querySelector(".modal__input-imageUrl"),l=document.querySelector(".profile__button-add");var d=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._toggleInputValidity(e),this.toggleButtonState(this._inputElements,this._submitButton)}))}))}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}toggleButtonState(){this._inputElements.every(this._hasInvalidInput)?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}_toggleInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(e){return e.validity.valid}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class h{constructor(e){this._modalElement=document.querySelector(e),this._closeButton=this._modalElement.querySelector(".modal__close"),this.closeModal=this.closeModal.bind(this)}openModal(){this._modalElement.classList.add("modal_opened"),this._setEventListeners()}closeModal(){this._modalElement.classList.remove("modal_opened"),this._removeEventListeners()}_setEventListeners(){document.addEventListener("keyup",this._handleEscUp),this._modalElement.addEventListener("mousedown",this._handleMouseDown),this._closeButton.addEventListener("click",this.closeModal)}_removeEventListeners(){document.removeEventListener("keyup",this._handleEscUp),this._modalElement.removeEventListener("mousedown",this._handleMouseDown),this._closeButton.removeEventListener("click",this.closeModal)}_handleMouseDown=e=>{e.target.classList.contains("modal_opened")&&this.closeModal(e.target)};_handleEscUp=e=>{"Escape"===e.key&&this.closeModal()}}class _ extends h{constructor(e,t){super(e),this._popupForm=this._modalElement.querySelector(".modal__form"),this._modalInputs=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=t,this.subButton=this._popupForm.querySelector(".modal__button"),this.subButtonText=this.subButton.textContent}_handleSubmit=()=>{this._handleFormSubmit(this._getInputValues()).then((()=>{this.closeModal()})).finally((()=>{this.renderLoading(!1)}))};_getInputValues(){const e={};return this._modalInputs.forEach((t=>{e[t.name]=t.value})),e}_setEventListeners(){super._setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this.renderLoading(!0),this._handleSubmit()}))}_removeEventListeners(){super._removeEventListeners(),this._popupForm.removeEventListener("submit",this._handleSubmit)}closeModal=()=>{this._popupForm.reset(),super.closeModal()};renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this.subButton.textContent=e?t:this.subButtonText}}const c=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}updateUserInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.profession})}).then(this._checkResponse)}updateUserAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}addDestinationCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.title,link:e.link})}).then(this._checkResponse)}delDestinationCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateCardLikes(e,t){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:t?"PUT":"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"a525747a-1396-48dd-bc2a-662500b37c81","Content-Type":"application/json"}}),u=e=>new class{constructor(e,t,s,r,i,n){let{cardDetails:o}=e;this._title=o.name,this._link=o.link,this._cardOwnerId=o.owner._id,this._id=o._id,this._cardSelector=s,this._likes=o.likes,this._likesCount=this._likes.length,this._myId=t,this._handleImageClick=r,this._handleDeleteClick=i,this._handleApiLike=n}getCardElement(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardTitleEl.textContent=this._title,this._cardImageEl=this._cardElement.querySelector(".card__image-card"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._title,this._cardLikesEl=this._cardElement.querySelector(".card__button-count"),this._cardLikesEl.textContent=this._getLikes(),this._trashEl=this._cardElement.querySelector(".card__button-del"),this._cardOwnerId!==this._myId&&this._trashEl.classList.add("card__button-del-inactive"),this.isLiked()&&this._cardElement.querySelector(".card__button-like").classList.add("card__button-like_active"),this._setEventListeners(),this._cardElement}_setEventListeners(){this._cardElement.querySelector(".card__button-like").addEventListener("click",(()=>{this._handleLike()})),this._cardElement.querySelector(".card__button-del").addEventListener("click",(()=>{this._handleDeleteClick(this,this._id)})),this._cardElement.querySelector(".card__image-display").addEventListener("click",(()=>this._handleImageClick(this._title,this._link)))}_handleLike(){this._cardElement.querySelector(".card__button-like").classList.toggle("card__button-like_active"),this._cardElement.querySelector(".card__button-like_active")?this._handleApiLike(this._id,!0).then((()=>{this.updateLikeCount(!0)})):this._handleApiLike(this._id,!1).then((()=>{this.updateLikeCount(!1)}))}_getLikes(){return this._likes.length}updateLikeCount(e){e?(this._likesCount++,this._cardLikesEl.textContent=this._likesCount):(this._likesCount--,this._cardLikesEl.textContent=this._likesCount)}isLiked(){return this._likes.some((e=>e._id===this._myId))}handleRemoveCard(){this._cardElement.remove(),this._cardElement=null}getUserID(){return this._ownerId._id}}({cardDetails:e},"85118cfaa5deb2aa40b27e18","#card-template",m,p,E).getCardElement(),m=(e,t)=>{y.openModal(e,t)},p=(e,t)=>{g.openModal(e,t)},E=(e,t)=>c.updateCardLikes(e,t).catch((e=>{console.error(e)})),v=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}renderItems(e){e.reverse().forEach((e=>this.addItem(this._renderer(e))))}addItem(e){this._container.prepend(e)}}({renderer:u},".destinations");Promise.all([c.getUserInfo(),c.getInitialCards()]).then((e=>{let[t,s]=e;L.setUserInfo({userData:t}),L.setAvatar(t.avatar),v.renderItems(s)})).catch(console.error);const b={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input-name_error",errorClass:"modal__error_visible"},L=new class{constructor(e,t,s){this._name=document.querySelector(e),this._profession=document.querySelector(t),this._avatarEl=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,profession:this._profession.textContent}}setUserInfo(e){let{userData:t}=e;this._name.textContent=t.name,this._profession.textContent=t.about,this._userID=t._id}getAvatar(){return{src:this._avatarEl.src}}setAvatar(e){this._avatarEl.src=e}}(".profile__name",".profile__profession",".profile__image"),S=new _("#editProfile-modal",(e=>c.updateUserInfo(e).then((t=>{const s={userData:{name:e.name,about:e.profession}};L.setUserInfo(s)})))),k=new _("#editAvatar-modal",(e=>{c.updateUserAvatar(e).then((t=>{e.avatar,L.setAvatar(e.avatar)}))}));i.addEventListener("click",(()=>{q.toggleButtonState();const e=L.getAvatar();a.value=e.src,k.openModal()})),r.addEventListener("click",(()=>{I.toggleButtonState();const e=L.getUserInfo();o.value=e.name,n.value=e.profession,S.openModal()}));const f=new _("#newCard-modal",(e=>c.addDestinationCard(e).then((e=>{const t=u(e);v.addItem(t)}))));l.addEventListener("click",(()=>{C.toggleButtonState(),f.openModal()}));const g=new class extends h{constructor(e,t){super(e),this._handleConfirmSubmit=t,this._popupForm=this._modalElement.querySelector(".modal__form"),this._modalInputs=this._popupForm.querySelectorAll(".modal__input")}openModal(e,t){super.openModal(),this._card=e,this._cardId=t}_handleSubmit=e=>{e.preventDefault(),this._handleConfirmSubmit(this._card,this._cardId),this.closeModal()};_setEventListeners(){super._setEventListeners(),this._popupForm.addEventListener("submit",this._handleSubmit)}_removeEventListeners(){super._removeEventListeners(),this._popupForm.removeEventListener("submit",this._handleSubmit)}closeModal=()=>{this._popupForm.reset(),super.closeModal()}}("#deleteCard-modal",((e,t)=>c.delDestinationCard(t).then((()=>{e.handleRemoveCard()})))),y=new class extends h{constructor(e){super(e),this._modalImageTitle=this._modalElement.querySelector(".modal__image-title"),this._modalImageLink=this._modalElement.querySelector(".modal__image-display")}openModal(e,t){this._modalImageLink.src=t,this._modalImageTitle.textContent=e,this._modalImageTitle.alt=e,super.openModal()}closeModal=()=>{super.closeModal()}}("#viewImage-modal"),C=new d(b,e),I=new d(b,t),q=new d(b,s);C.enableValidation(),I.enableValidation(),q.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjM0IsRUFBc0J2TCxHQUVwRTJNLEVBQWlCOUosbUJBQ2pCMEosRUFBa0IxSixtQkFDbEJ3SixFQUFvQnhKLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL0NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuLy8gICB7XHJcbi8vICAgICB0aXRsZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuLy8gICAgIC8vYWx0VGV4dDogXCJBIHZpZXcgdXAgYSByaXZlciB0aHJvdWdoIGEgZm9yZXN0IHRvIG1vdW50YWluIGNsaWZmc2lkZXMuXCIsXHJcbi8vICAgfSxcclxuLy8gICB7XHJcbi8vICAgICB0aXRsZTogXCJMYWtlIExvdWlzZVwiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4vLyAgICAgLy9hbHRUZXh0OlxyXG4vLyAgICAgLy9cIkEgdmlldyBhY3Jvc3MgYW4gYXF1YSBjb2xvcmVkIGxha2UgdG8gYSBwYXNzIGJldHdlZW4gdHdvIGphZ2dlZCBtb3VudGFpbnMuXCIsXHJcbi8vICAgfSxcclxuXHJcbi8vICAge1xyXG4vLyAgICAgdGl0bGU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuLy8gICAgIC8vYWx0VGV4dDogXCJBIHZpZXcgb3ZlciBhIGxvdyBtb3VudGFpbiByYW5nZSBmYWNpbmcgdGhlIHNldHRpbmcgc3VuLlwiLFxyXG4vLyAgIH0sXHJcblxyXG4vLyAgIHtcclxuLy8gICAgIHRpdGxlOiBcIkxhdGVtYXJcIixcclxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4vLyAgICAgLy9hbHRUZXh0OiBcIkEgc3RhcnJ5IG5pZ2h0IHZpZXcgb2YgdGhyZWUgc3RvbmUgbW91bnRhaW4gcGVha3MuXCIsXHJcbi8vICAgfSxcclxuXHJcbi8vICAge1xyXG4vLyAgICAgdGl0bGU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuLy8gICAgIC8vYWx0VGV4dDpcclxuLy8gICAgIC8vIFwiQSB2aWV3IG9mIGEgcm9jayBiZWFjaCBuZWFyIGEgY2FsbSBsYWtlLCByZWZsZWN0aW5nIHRoZSBzdG9ueSBtb3VudGFpbnMgaW4gdGhlIGRpc3RhbmNlLlwiLFxyXG4vLyAgIH0sXHJcblxyXG4vLyAgIHtcclxuLy8gICAgIHRpdGxlOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuLy8gICAgIC8vYWx0VGV4dDpcclxuLy8gICAgIC8vIFwiQSB2aWV3IG9mIGEgc2VyaWVzIG9mIHJvdyBib2F0cyB0aWVkIHRvIGEgd2hhcmYgb24gYSBsYWtlIHN1cnJvdW5kZWQgYnkgbW91bnRhaW5zLlwiLFxyXG4vLyAgIH0sXHJcbi8vIF07XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWZvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBlZGl0Q2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLXVwZGF0ZS1mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZVNlbGVjdG9yID0gXCIucHJvZmlsZV9fbmFtZVwiO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVByb2Zlc3Npb25TZWxlY3RvciA9IFwiLnByb2ZpbGVfX3Byb2Zlc3Npb25cIjtcclxuZXhwb3J0IGNvbnN0IG9wZW5FZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IG9wZW5BdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLWVkaXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW1hZ2VTZWxlY3RvciA9IFwiLnByb2ZpbGVfX2ltYWdlXCI7XHJcbmV4cG9ydCBjb25zdCBwcm9mZXNzaW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19pbnB1dC1wcm9mZXNzaW9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0LW5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0LWltYWdlVXJsXCIpO1xyXG5leHBvcnQgY29uc3QgZGVzdGluYXRpb25zID0gXCIuZGVzdGluYXRpb25zXCI7XHJcbmV4cG9ydCBjb25zdCBvcGVuQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tYWRkXCIpO1xyXG5leHBvcnQgY29uc3QgbXlJZCA9IFwiYTUyNTc0N2EtMTM5Ni00OGRkLWJjMmEtNjYyNTAwYjM3YzgxXCI7XHJcbmV4cG9ydCBjb25zdCBfbXlJZCA9IFwiODUxMThjZmFhNWRlYjJhYTQwYjI3ZTE4XCI7XHJcblxyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRFbGVtZW50cywgdGhpcy5fc3VibWl0QnV0dG9uKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkodGhpcy5faGFzSW52YWxpZElucHV0KSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF90b2dnbGVJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0RWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gUkVRVUlSRU1FTlRTXHJcbi8vIEl0cyBjb25zdHJ1Y3RvciBoYXMgdHdvIHBhcmFtZXRlcnMuIFRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgYSBzZXR0aW5ncyBvYmplY3QgdGhhdCBzdG9yZXMgc2VsZWN0b3JzIGFuZCBmb3JtIGNsYXNzZXMsIGFuZCB0aGUgc2Vjb25kIG9uZSB0YWtlcyBhIGZvcm0gZWxlbWVudCB0byBiZSB2YWxpZGF0ZWQuXHJcbi8vIEl0IGhhcyBwcml2YXRlIG1ldGhvZHMgZm9yIHByb2Nlc3NpbmcgdGhlIGZvcm0sIHdoaWNoIGluY2x1ZGU6IGNoZWNraW5nIHRoZSBmaWVsZCdzIHZhbGlkaXR5LCBjaGFuZ2luZyB0aGUgc3RhdGUgb2YgdGhlIFN1Ym1pdCBidXR0b24sIGFuZCBhZGRpbmcgYWxsIHRoZSBuZWVkZWQgaGFuZGxlcnMuXHJcbi8vIEl0IGhhcyBhIHB1YmxpYyBtZXRob2QgZW5hYmxlVmFsaWRhdGlvbigpLCB3aGljaCBlbmFibGVzIGZvcm0gdmFsaWRhdGlvbi5cclxuLy8gSXQgaGFzIGEgcHVibGljIG1ldGhvZCB0byBlaXRoZXIgZGlzYWJsZSB0aGUgc3RhdGUgb2YgdGhlIGJ1dHRvbiBvciByZXNldCBmb3JtIHZhbGlkYXRpb24gKGluY2x1ZGluZyB0aGUgc3RhdGUgb2YgdGhlIHN1Ym1pdCBidXR0b24pLlxyXG4vLyBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhlIEZvcm1WYWxpZGF0b3IgY2xhc3MgZm9yIGVhY2ggZm9ybSB0aGF0IHNob3VsZCBiZSB2YWxpZGF0ZWQuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsID0gdGhpcy5jbG9zZU1vZGFsLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuTW9kYWwoKSB7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZU1vZGFsKCkge1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy9zZXQgY2xvc2luZyBtb2RhbCBldmVudHNcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NVcCk7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVNb3VzZURvd24pO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2VNb2RhbCk7XHJcbiAgfVxyXG5cclxuICBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjVXApO1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlTW91c2VEb3duKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlTW9kYWwpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZU1vdXNlRG93biA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoZXZ0LnRhcmdldCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZUVzY1VwID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX21vZGFsSW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLnN1YkJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbicpO1xyXG4gICAgdGhpcy5zdWJCdXR0b25UZXh0ID0gdGhpcy5zdWJCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICBcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTdWJtaXQgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHRoaXMucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG5cclxuICAgIHRoaXMuX21vZGFsSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpXHJcbiAgICAgXHJcbiAgICB9KTtcclxuICBcclxuICB9XHJcblxyXG4gIF9yZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0KTtcclxuICB9XHJcblxyXG4gIGNsb3NlTW9kYWwgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlTW9kYWwoKTtcclxuICB9O1xyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgc2F2ZUJ1dHRvblRleHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuc3ViQnV0dG9uLnRleHRDb250ZW50ID0gc2F2ZUJ1dHRvblRleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnN1YkJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuc3ViQnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLy8gSU1QT1JUIENMQVNTL01PRFVMRVxyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgbXlJZCxcclxuICBfbXlJZCxcclxuICBhZGRDYXJkRm9ybSxcclxuICBlZGl0Q2FyZEZvcm0sXHJcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcixcclxuICBwcm9maWxlUHJvZmVzc2lvblNlbGVjdG9yLFxyXG4gIG9wZW5FZGl0QnV0dG9uLFxyXG4gIHByb2Zlc3Npb25JbnB1dCxcclxuICBuYW1lSW5wdXQsXHJcbiAgYXZhdGFySW5wdXQsXHJcbiAgZGVzdGluYXRpb25zLFxyXG4gIG9wZW5BZGRCdXR0b24sXHJcbiAgYXZhdGFyRm9ybSxcclxuICBvcGVuQXZhdGFyQnV0dG9uLFxyXG4gIHByb2ZpbGVJbWFnZVNlbGVjdG9yLFxyXG4gIFxyXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcclxuXHJcbi8vIENyZWF0ZXMgYW5kIGluc3RhbmNlIG9mIEFQSSB0byBhY2Nlc3MgbWV0aG9kcyBmcm9tXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMy1lblwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IG15SWQsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIENyZWF0ZXMgYW4gaW5zdGFuY2UgdG8gY3JlYXRlIGFuIGluZGl2aWR1YWwgY2FyZFxyXG5jb25zdCByZW5kZXJDYXJkID0gKGNhcmREZXRhaWxzKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgLy8geyBjYXJkRGV0YWlscyB9XHJcbiAgICB7IGNhcmREZXRhaWxzIH0sXHJcbiAgICAvLyBteUlkXHJcbiAgICBfbXlJZCxcclxuICAgIC8vIGNhcmRTZWxlY3RvclxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgLy8gaGFuZGxlIGZ1bmN0aW9uc1xyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrXHJcbiAgKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2V0Q2FyZEVsZW1lbnQoKTtcclxuXHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlSW1hZ2VDbGljayA9ICh0aXRsZSwgbGluaykgPT4ge1xyXG4gIGNhcmRJbWFnZU1vZGFsLm9wZW5Nb2RhbCh0aXRsZSwgbGluayk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVEZWxldGVDbGljayA9IChjYXJkLCBjYXJkSWQpID0+IHtcclxuICBkZWxldGVDYXJkQ29uZmlybS5vcGVuTW9kYWwoY2FyZCwgY2FyZElkKTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZUxpa2VDbGljayA9IChjYXJkSWQsIGlzTGlrZWQpID0+IHtcclxuICByZXR1cm4gYXBpLnVwZGF0ZUNhcmRMaWtlcyhjYXJkSWQsIGlzTGlrZWQpLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGRlZmF1bHREZXN0aW5hdGlvblNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIGRlc3RpbmF0aW9uc1xyXG4pO1xyXG5cclxuLy8gQVBJIHByb21pc2UgdG8gbG9hZCBjYXJkcyBhbmQgcHJvZmlsZSBpbmZvcm1hdGlvblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXHJcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IHVzZXJEYXRhIH0pO1xyXG4gICAgdXNlckluZm8uc2V0QXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcblxyXG4gICAgZGVmYXVsdERlc3RpbmF0aW9uU2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcblxyXG4vLyBDcmVhdGVzIGEgc2luZ3VsYXIgbG9jYXRpb24gZm9yIHRoZSB2YXJpb3VzIGNsYXNzZXMgaW52b2x2ZWQgaW4gdmFsaWRhdGlvblxyXG5jb25zdCBmb3JtVmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LW5hbWVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG4vLyBDcmVhdGVzIGFuZCBpbnN0YW5jZSBvZiBVc2VySW5mbyBhbmQgcHVsbHMgdGhlIHJlc3BlY3RpdmUgdXNlciBkYXRhXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxyXG4gIHByb2ZpbGVOYW1lU2VsZWN0b3IsXHJcbiAgcHJvZmlsZVByb2Zlc3Npb25TZWxlY3RvcixcclxuICBwcm9maWxlSW1hZ2VTZWxlY3RvclxyXG4pO1xyXG5cclxuLy8gQ3JlYXRlcyBhbmQgaW5zdGFuY2Ugb2YgcG9wdXBmb3JtIHRvIGFjY2VzcyBtZXRob2RzIGZvciBmb3Jtc1xyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNlZGl0UHJvZmlsZS1tb2RhbFwiLCAodmFsdWVzKSA9PiB7XHJcbiAgcmV0dXJuIGFwaS51cGRhdGVVc2VySW5mbyh2YWx1ZXMpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0ge1xyXG4gICAgICB1c2VyRGF0YTogeyBuYW1lOiB2YWx1ZXMubmFtZSwgYWJvdXQ6IHZhbHVlcy5wcm9mZXNzaW9uIH0sXHJcbiAgICB9O1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzdWx0KTtcclxuICB9KTtcclxufSk7XHJcblxyXG4vLyBDcmVhdGVzIGFuIGluc3RhbmNlIGZvciBhY2Nlc3NpbmcgbWV0aG9kcyBmb3IgdXBkYXRpbmcgdGhlIGF2YXRhciBpbWFnZVxyXG5jb25zdCBlZGl0QXZhdGFyRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2VkaXRBdmF0YXItbW9kYWxcIiwgKHZhbHVlcykgPT4ge1xyXG4gIGFwaS51cGRhdGVVc2VyQXZhdGFyKHZhbHVlcykudGhlbigocmVzKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSB7XHJcbiAgICAgIGF2YXRhcjogdmFsdWVzLmF2YXRhcixcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgdXNlckluZm8uc2V0QXZhdGFyKHZhbHVlcy5hdmF0YXIpO1xyXG4gIH0pO1xyXG59KTtcclxuLy8gT3BlbnMgdGhlIGZvcm0gZm9yIEF2YXRhclxyXG5vcGVuQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZWRpdEF2YXRhclZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIGNvbnN0IGF2YXRhckRhdGEgPSB1c2VySW5mby5nZXRBdmF0YXIoKTtcclxuICBhdmF0YXJJbnB1dC52YWx1ZSA9IGF2YXRhckRhdGEuc3JjO1xyXG5cclxuICBlZGl0QXZhdGFyRm9ybS5vcGVuTW9kYWwoKTtcclxufSk7XHJcblxyXG4vLyBPcGVucyB0aGUgZm9ybSBmb3IgbmFtZSBhbmQgcHJvZmVzc2lvblxyXG5vcGVuRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgY29uc3QgcHJvZmlsZURhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhLm5hbWU7XHJcbiAgcHJvZmVzc2lvbklucHV0LnZhbHVlID0gcHJvZmlsZURhdGEucHJvZmVzc2lvbjtcclxuXHJcbiAgZWRpdFByb2ZpbGVGb3JtLm9wZW5Nb2RhbCgpO1xyXG59KTtcclxuXHJcbi8vIEZvciBnYWluaW5nIGFjY2VzcyB0byBtZXRob2RzIHdpdGhpbiBwb3B1cCBmb3JtXHJcbmNvbnN0IG5ld0Rlc3RpbmF0aW9uQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNuZXdDYXJkLW1vZGFsXCIsXHJcbiAgKG5ld0NhcmRJbnB1dHMpID0+IHtcclxuICAgIFxyXG4gICAgcmV0dXJuIGFwaS5hZGREZXN0aW5hdGlvbkNhcmQobmV3Q2FyZElucHV0cykudGhlbigocmVzKSA9PiB7XHJcbiAgICAgY29uc3QgY2FyZCA9IHJlbmRlckNhcmQocmVzKTtcclxuICAgICAgZGVmYXVsdERlc3RpbmF0aW9uU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xyXG4gICAgICBcclxuICAgICAgXHJcbiAgICB9KTtcclxuICB9XHJcbik7XHJcblxyXG4vLyBPcGVucyB0aGUgbW9kYWwgdGhhdCBhZGRzIGRlc3RpbmF0aW9uIGNhcmRzXHJcbm9wZW5BZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgbmV3RGVzdGluYXRpb25DYXJkRm9ybS5vcGVuTW9kYWwoKTtcclxufSk7XHJcblxyXG4vLyBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGEgZGVsZXRlIGNvbmZpcm1hdGlvblxyXG5jb25zdCBkZWxldGVDYXJkQ29uZmlybSA9IG5ldyBQb3B1cFdpdGhDb25maXJtKFxyXG4gIC8vbW9kYWxTZWxlY3RvclxyXG4gIFwiI2RlbGV0ZUNhcmQtbW9kYWxcIixcclxuICAvLyBoYW5kbGVDb25maXJtU3VibWl0XHJcblxyXG4gIC8vIGRlbGV0ZUNhcmQoKVxyXG4gIChjYXJkLCBjYXJkSWQpID0+IHtcclxuICAgIHJldHVybiBhcGkuZGVsRGVzdGluYXRpb25DYXJkKGNhcmRJZCkudGhlbigoKSA9PiB7XHJcbiAgICAgIGNhcmQuaGFuZGxlUmVtb3ZlQ2FyZCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4pO1xyXG5cclxuY29uc3QgY2FyZEltYWdlTW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjdmlld0ltYWdlLW1vZGFsXCIpO1xyXG5cclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uQ29uZmlnLCBhZGRDYXJkRm9ybSk7XHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVZhbGlkYXRpb25Db25maWcsIGVkaXRDYXJkRm9ybSk7XHJcbmNvbnN0IGVkaXRBdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtVmFsaWRhdGlvbkNvbmZpZywgYXZhdGFyRm9ybSk7XHJcblxyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5lZGl0QXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KS50aGVuKFxyXG4gICAgICB0aGlzLl9jaGVja1Jlc3BvbnNlXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSkudGhlbihcclxuICAgICAgdGhpcy5fY2hlY2tSZXNwb25zZVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVVzZXJJbmZvKGluZm8pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBpbmZvLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGluZm8ucHJvZmVzc2lvbixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckF2YXRhcihpbmZvKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoaW5mbyksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkRGVzdGluYXRpb25DYXJkKGNhcmRzKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBjYXJkcy50aXRsZSxcclxuICAgICAgICBsaW5rOiBjYXJkcy5saW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkZWxEZXN0aW5hdGlvbkNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICB1cGRhdGVDYXJkTGlrZXMoY2FyZElkLCBpc0xpa2VkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIlBVVFwiIDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IGNhcmREZXRhaWxzIH0sXHJcbiAgICBteUlkLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrXHJcbiAgICBcclxuICApIHtcclxuICAgIHRoaXMuX3RpdGxlID0gY2FyZERldGFpbHMubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGV0YWlscy5saW5rO1xyXG4gICAgdGhpcy5fY2FyZE93bmVySWQgPSBjYXJkRGV0YWlscy5vd25lci5faWQ7XHJcbiAgICB0aGlzLl9pZCA9IGNhcmREZXRhaWxzLl9pZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2xpa2VzID0gY2FyZERldGFpbHMubGlrZXM7XHJcbiAgICB0aGlzLl9saWtlc0NvdW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgdGhpcy5fbXlJZCA9IG15SWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVBcGlMaWtlID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZEVsZW1lbnQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2UtY2FyZFwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuX2NhcmRMaWtlc0VsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tY291bnRcIik7XHJcbiAgICB0aGlzLl9jYXJkTGlrZXNFbC50ZXh0Q29udGVudCA9IHRoaXMuX2dldExpa2VzKCk7XHJcbiAgICB0aGlzLl90cmFzaEVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tZGVsXCIpO1xyXG4gICAgaWYgKHRoaXMuX2NhcmRPd25lcklkICE9PSB0aGlzLl9teUlkKSB7XHJcbiAgICAgIHRoaXMuX3RyYXNoRWwuY2xhc3NMaXN0LmFkZChcImNhcmRfX2J1dHRvbi1kZWwtaW5hY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgICAuY2xhc3NMaXN0LmFkZChcImNhcmRfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50IC8vIGhhbmRsZSBhIGNsaWNrIG9uIHRoZSBsaWtlIGJ1dHRvblxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19idXR0b24tbGlrZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlKCk7IC8vIExpbmUgNzZcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgLy8gaGFuZGxlIGEgY2xpY2sgb24gdGhlIHRyYXNoY2FuXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1kZWxcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcywgdGhpcy5faWQpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCAvLyBoYW5kbGUgY2xpY2tpbmcgZm9yIGEgbGFyZ2UgaW1hZ2VcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2UtZGlzcGxheVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl90aXRsZSwgdGhpcy5fbGluaylcclxuICAgICAgKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIilcclxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b24tbGlrZV9hY3RpdmVcIik7XHJcblxyXG5cclxuICAgICAgaWYgKHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpKSB7XHJcbiAgICAgICB0aGlzLl9oYW5kbGVBcGlMaWtlKHRoaXMuX2lkLCB0cnVlKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHRoaXMudXBkYXRlTGlrZUNvdW50KHRydWUpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgdGhpcy5faGFuZGxlQXBpTGlrZSh0aGlzLl9pZCwgZmFsc2UpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVMaWtlQ291bnQoZmFsc2UpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIF9nZXRMaWtlcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG4gIH1cclxuXHJcbiAgdXBkYXRlTGlrZUNvdW50KGFkZCkge1xyXG4gICAgaWYgKGFkZCkge1xyXG4gICAgICB0aGlzLl9saWtlc0NvdW50Kys7XHJcbiAgICAgIHRoaXMuX2NhcmRMaWtlc0VsLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXNDb3VudDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VzQ291bnQtLTtcclxuICAgICAgdGhpcy5fY2FyZExpa2VzRWwudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlc0NvdW50O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX215SWQpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlUmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlcklEKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX293bmVySWQuX2lkO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5hZGRJdGVtKHRoaXMuX3JlbmRlcmVyKGl0ZW0pKSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IocHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZVByb2Zlc3Npb25TZWxlY3RvciwgcHJvZmlsZUltYWdlU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmVzc2lvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZVByb2Zlc3Npb25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUltYWdlU2VsZWN0b3IpO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIHByb2Zlc3Npb246IHRoaXMuX3Byb2Zlc3Npb24udGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyB1c2VyRGF0YSB9KSB7XHJcbiAgICBcclxuOyAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gdXNlckRhdGEubmFtZTtcclxuICAgIHRoaXMuX3Byb2Zlc3Npb24udGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcclxuICAgIHRoaXMuX3VzZXJJRCA9IHVzZXJEYXRhLl9pZDtcclxuICB9XHJcblxyXG4gIGdldEF2YXRhcigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNyYzogdGhpcy5fYXZhdGFyRWwuc3JjLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldEF2YXRhcihhdmF0YXIpIHtcclxuICAgIFxyXG4gICAgdGhpcy5fYXZhdGFyRWwuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3RvciwgaGFuZGxlQ29uZmlybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVDb25maXJtU3VibWl0ID0gaGFuZGxlQ29uZmlybVN1Ym1pdDtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fbW9kYWxJbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuTW9kYWwoY2FyZCwgY2FyZElkKSB7XHJcbiAgICBzdXBlci5vcGVuTW9kYWwoKTtcclxuICAgIHRoaXMuX2NhcmQgPSBjYXJkO1xyXG4gICAgdGhpcy5fY2FyZElkID0gY2FyZElkO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVN1Ym1pdCA9IChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlQ29uZmlybVN1Ym1pdCh0aGlzLl9jYXJkLCB0aGlzLl9jYXJkSWQpO1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsKCk7XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0KTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0KTtcclxuICB9XHJcblxyXG4gIGNsb3NlTW9kYWwgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlTW9kYWwoKTtcclxuICB9O1xyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlVGl0bGUgPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2ltYWdlLXRpdGxlXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlTGluayA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtZGlzcGxheVwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3Blbk1vZGFsKHRpdGxlLCBsaW5rKSB7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlTGluay5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fbW9kYWxJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlVGl0bGUuYWx0ID0gdGl0bGU7XHJcbiAgICBzdXBlci5vcGVuTW9kYWwoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlTW9kYWwgPSAoKSA9PiB7XHJcbiAgICBzdXBlci5jbG9zZU1vZGFsKCk7XHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkQ2FyZEZvcm0iLCJlZGl0Q2FyZEZvcm0iLCJhdmF0YXJGb3JtIiwib3BlbkVkaXRCdXR0b24iLCJvcGVuQXZhdGFyQnV0dG9uIiwicHJvZmVzc2lvbklucHV0IiwibmFtZUlucHV0IiwiYXZhdGFySW5wdXQiLCJvcGVuQWRkQnV0dG9uIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdG9nZ2xlSW5wdXRWYWxpZGl0eSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiZXZlcnkiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJtb2RhbFNlbGVjdG9yIiwiX21vZGFsRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsImNsb3NlTW9kYWwiLCJiaW5kIiwib3Blbk1vZGFsIiwiX3JlbW92ZUV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZUVzY1VwIiwiX2hhbmRsZU1vdXNlRG93biIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjb250YWlucyIsImtleSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX21vZGFsSW5wdXRzIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJzdWJCdXR0b24iLCJzdWJCdXR0b25UZXh0IiwiX2hhbmRsZVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsInRoZW4iLCJmaW5hbGx5IiwicmVuZGVyTG9hZGluZyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJyZXNldCIsImlzTG9hZGluZyIsInNhdmVCdXR0b25UZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiYXBpIiwiX3JlZiIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwiZ2V0VXNlckluZm8iLCJ1cGRhdGVVc2VySW5mbyIsImluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwicHJvZmVzc2lvbiIsInVwZGF0ZVVzZXJBdmF0YXIiLCJhZGREZXN0aW5hdGlvbkNhcmQiLCJjYXJkcyIsInRpdGxlIiwibGluayIsImRlbERlc3RpbmF0aW9uQ2FyZCIsImNhcmRJZCIsInVwZGF0ZUNhcmRMaWtlcyIsImlzTGlrZWQiLCJhdXRob3JpemF0aW9uIiwicmVuZGVyQ2FyZCIsImNhcmREZXRhaWxzIiwibXlJZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsIl90aXRsZSIsIl9saW5rIiwiX2NhcmRPd25lcklkIiwib3duZXIiLCJfaWQiLCJfY2FyZFNlbGVjdG9yIiwiX2xpa2VzIiwibGlrZXMiLCJfbGlrZXNDb3VudCIsIl9teUlkIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlQXBpTGlrZSIsImdldENhcmRFbGVtZW50IiwiX2NhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkVGl0bGVFbCIsIl9jYXJkSW1hZ2VFbCIsInNyYyIsImFsdCIsIl9jYXJkTGlrZXNFbCIsIl9nZXRMaWtlcyIsIl90cmFzaEVsIiwiX2hhbmRsZUxpa2UiLCJ0b2dnbGUiLCJ1cGRhdGVMaWtlQ291bnQiLCJzb21lIiwibGlrZSIsImhhbmRsZVJlbW92ZUNhcmQiLCJnZXRVc2VySUQiLCJfb3duZXJJZCIsImNhcmRJbWFnZU1vZGFsIiwiY2FyZCIsImRlbGV0ZUNhcmRDb25maXJtIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJkZWZhdWx0RGVzdGluYXRpb25TZWN0aW9uIiwic2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwicmV2ZXJzZSIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJhbGwiLCJ1c2VyRGF0YSIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXIiLCJhdmF0YXIiLCJmb3JtVmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlUHJvZmVzc2lvblNlbGVjdG9yIiwicHJvZmlsZUltYWdlU2VsZWN0b3IiLCJfbmFtZSIsIl9wcm9mZXNzaW9uIiwiX2F2YXRhckVsIiwiX3VzZXJJRCIsImdldEF2YXRhciIsImVkaXRQcm9maWxlRm9ybSIsInZhbHVlcyIsInJlc3VsdCIsImVkaXRBdmF0YXJGb3JtIiwiZWRpdEF2YXRhclZhbGlkYXRvciIsImF2YXRhckRhdGEiLCJlZGl0Rm9ybVZhbGlkYXRvciIsInByb2ZpbGVEYXRhIiwibmV3RGVzdGluYXRpb25DYXJkRm9ybSIsIm5ld0NhcmRJbnB1dHMiLCJhZGRGb3JtVmFsaWRhdG9yIiwiaGFuZGxlQ29uZmlybVN1Ym1pdCIsIl9oYW5kbGVDb25maXJtU3VibWl0IiwiX2NhcmQiLCJfY2FyZElkIiwiX21vZGFsSW1hZ2VUaXRsZSIsIl9tb2RhbEltYWdlTGluayIsIkZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9